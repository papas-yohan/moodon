# 🚀 즉시 실행 계획 - 단계별 가이드

**작성일**: 2024년 11월 15일  
**예상 소요 시간**: 약 1시간  
**난이도**: 쉬움

---

## 📋 작업 순서 및 기대효과

### 1단계: Vercel 도메인 확인 및 고정 (10분)
### 2단계: Railway 콜드 스타트 개선 (15분)
### 3단계: 솔라피 API 실제 연동 준비 (30분)

---

## 1️⃣ 단계 1: Vercel 도메인 확인 및 고정

### 🎯 기대효과
- ✅ 안정적인 프론트엔드 URL 확보
- ✅ CORS 설정 단순화
- ✅ 배포마다 URL 변경 걱정 없음
- ✅ 사용자에게 일관된 URL 제공

### ⚠️ 주의사항
- Railway CORS 설정을 반드시 업데이트해야 함
- 기존 URL로 접근하던 사용자는 영향 없음 (리다이렉트됨)
- DNS 전파 시간 없음 (Vercel 내부 도메인)

### 🔍 사이드이펙트 체크
- ❌ 기존 기능 영향: 없음
- ❌ 데이터 손실: 없음
- ✅ 롤백 가능: 언제든지 가능

### 📝 실행 단계
```
1. Vercel Dashboard 접속
   → https://vercel.com/dashboard

2. frontend 프로젝트 선택

3. Settings → Domains 확인
   → Production Domain 복사

4. Railway Dashboard 접속
   → https://railway.app/dashboard

5. backend 프로젝트 → Variables
   → CORS_ORIGIN 업데이트

6. 테스트: 프론트엔드에서 API 호출 확인
```

---

## 2️⃣ 단계 2: Railway 콜드 스타트 개선

### 🎯 기대효과
- ✅ 첫 요청 응답 시간 12초 → 1초 이하로 개선
- ✅ 사용자 경험 대폭 향상
- ✅ 서버가 항상 준비 상태 유지
- ✅ 무료로 해결 가능

### ⚠️ 주의사항
- GitHub Actions 크론잡은 5분 간격 제한
- UptimeRobot 무료 플랜은 5분 간격
- Railway 무료 플랜 사용량 확인 필요 (월 $5 크레딧)

### 🔍 사이드이펙트 체크
- ❌ 기존 기능 영향: 없음
- ❌ 데이터 손실: 없음
- ⚠️ Railway 사용량 증가: 미미함 (Health Check는 가벼움)
- ✅ 롤백 가능: 크론잡 삭제만 하면 됨

### 📝 실행 방법 (2가지 옵션)

#### 옵션 A: GitHub Actions (권장)
- 장점: 프로젝트 내부에서 관리
- 단점: GitHub 저장소 필요

#### 옵션 B: UptimeRobot (간단)
- 장점: 설정 매우 간단, 별도 코드 불필요
- 단점: 외부 서비스 의존

---

## 3️⃣ 단계 3: 솔라피 API 실제 연동 준비

### 🎯 기대효과
- ✅ 실제 SMS/카카오톡 발송 가능
- ✅ 시뮬레이션 모드 종료
- ✅ 실제 비즈니스 운영 가능
- ✅ 발송 통계 정확도 100%

### ⚠️ 주의사항
- 💰 비용 발생: SMS 8원/건, 카카오톡 9-15원/건
- 📱 발신번호 등록 필요 (본인인증)
- ⏰ 발신번호 승인 시간: 즉시~1일
- 🔐 API 키 보안 관리 필수

### 🔍 사이드이펙트 체크
- ❌ 기존 기능 영향: 없음 (시뮬레이션 모드 유지 가능)
- ❌ 데이터 손실: 없음
- ⚠️ 비용 발생: 테스트 시 최소 비용
- ✅ 롤백 가능: API 키 삭제하면 시뮬레이션 모드로 복귀

### 📝 실행 단계
```
1. 솔라피 계정 생성
   → https://solapi.com

2. 본인인증 및 발신번호 등록
   → 콘솔 → 발신번호 관리

3. API 키 발급
   → 콘솔 → API 설정 → API Key 생성

4. 테스트 크레딧 충전
   → 최소 5,000원 권장

5. 웹 UI에서 설정
   → http://localhost:5173/settings (로컬)
   → https://[vercel-domain]/settings (프로덕션)

6. 테스트 발송
   → 본인 번호로 테스트
```

---

## 🎯 전체 작업 플로우

```
시작
  ↓
[1단계] Vercel 도메인 확인 (5분)
  ↓
[1단계] Railway CORS 업데이트 (5분)
  ↓
[1단계] 테스트 (프론트엔드 → 백엔드 API 호출)
  ↓
[2단계] UptimeRobot 또는 GitHub Actions 설정 (15분)
  ↓
[2단계] 테스트 (콜드 스타트 확인)
  ↓
[3단계] 솔라피 계정 생성 (10분)
  ↓
[3단계] API 키 발급 및 설정 (10분)
  ↓
[3단계] 테스트 발송 (10분)
  ↓
완료 ✅
```

---

## 📊 예상 결과

### Before (현재)
```
첫 API 요청:     12초+
이후 요청:       200ms
도메인:          변경 가능성 있음
SMS 발송:        시뮬레이션
```

### After (작업 후)
```
첫 API 요청:     1초 이하
이후 요청:       200ms
도메인:          고정됨
SMS 발송:        실제 발송 가능
```

---

## 💰 비용 분석

### 초기 비용
```
Vercel 도메인:   무료
UptimeRobot:     무료
솔라피 충전:     5,000원 (선택)
─────────────────────
총:              5,000원
```

### 월간 운영 비용 (테스트 단계)
```
Railway:         무료 ($5 크레딧 내)
UptimeRobot:     무료
솔라피:          사용량에 따라
─────────────────────
총:              ~0-10,000원/월
```

---

## ✅ 체크리스트

### 작업 전 준비
- [ ] Vercel 계정 로그인 확인
- [ ] Railway 계정 로그인 확인
- [ ] 현재 프론트엔드 URL 백업
- [ ] 현재 CORS 설정 백업

### 1단계 완료 확인
- [ ] Vercel Production Domain 확인
- [ ] Railway CORS_ORIGIN 업데이트
- [ ] 프론트엔드에서 API 호출 테스트
- [ ] 브라우저 콘솔 에러 없음

### 2단계 완료 확인
- [ ] UptimeRobot 모니터 생성 (또는 GitHub Actions)
- [ ] 5분 후 Railway 로그 확인
- [ ] Health Check 요청 확인
- [ ] 콜드 스타트 시간 측정

### 3단계 완료 확인
- [ ] 솔라피 계정 생성
- [ ] 발신번호 등록 및 승인
- [ ] API 키 발급
- [ ] 웹 UI에서 API 키 저장
- [ ] 테스트 발송 성공

---

## 🚨 문제 발생 시 대응

### Vercel 도메인 문제
```
증상: CORS 에러 발생
해결: Railway CORS_ORIGIN에 새 도메인 추가
롤백: 이전 도메인으로 복구
```

### Railway 콜드 스타트 문제
```
증상: 여전히 느림
해결: UptimeRobot 간격 확인 (5분)
롤백: 모니터 일시 중지
```

### 솔라피 연동 문제
```
증상: 발송 실패
해결: API 키 재확인, 크레딧 확인
롤백: API 키 삭제 (시뮬레이션 모드로)
```

---

## 📞 지원

### 문제 발생 시
1. 에러 메시지 확인
2. 브라우저 콘솔 확인
3. Railway 로그 확인
4. 이 문서의 "문제 발생 시 대응" 참고

### 추가 도움
- Vercel 문서: https://vercel.com/docs
- Railway 문서: https://docs.railway.app
- 솔라피 문서: https://docs.solapi.com

---

**준비 완료! 이제 단계별로 진행하겠습니다.** 🚀
