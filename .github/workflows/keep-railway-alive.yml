name: Keep Railway Backend Alive

on:
  schedule:
    # 5ë¶„ë§ˆë‹¤ ì‹¤í–‰ (GitHub Actions ìµœì†Œ ê°„ê²©)
    - cron: '*/5 * * * *'
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  ping-backend:
    runs-on: ubuntu-latest
    
    steps:
      - name: Ping Railway Backend Health Check
        run: |
          echo "ğŸ¥ Checking Railway backend health..."
          
          response=$(curl -s -o /dev/null -w "%{http_code}" \
            https://backend-production-c41fe.up.railway.app/api/v1/health)
          
          if [ $response -eq 200 ]; then
            echo "âœ… Backend is alive and healthy (HTTP $response)"
            exit 0
          else
            echo "âš ï¸ Backend returned HTTP $response"
            # ì‹¤íŒ¨í•´ë„ ì›Œí¬í”Œë¡œìš°ëŠ” ì„±ê³µìœ¼ë¡œ ì²˜ë¦¬ (ì¼ì‹œì  ë¬¸ì œì¼ ìˆ˜ ìˆìŒ)
            exit 0
          fi
      
      - name: Log timestamp
        run: |
          echo "â° Health check completed at: $(date -u '+%Y-%m-%d %H:%M:%S UTC')"
